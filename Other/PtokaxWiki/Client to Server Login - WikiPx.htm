<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0056)http://wiki.ptokax.ch/doku.php/misc/dcprotocol/c2s_login -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
				
		<meta name="generator" content="DokuWiki Release 2009-02-14b">
<meta name="robots" content="index,follow">
<meta name="date" content="2010-05-25T20:08:10+0200">
<meta name="keywords" content="misc,dcprotocol,c2s_login">
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.ptokax.ch/lib/exe/opensearch.php" title="WikiPx">
<link rel="start" href="http://wiki.ptokax.ch/">
<link rel="contents" href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/c2s_login?do=index" title="Index">
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="http://wiki.ptokax.ch/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://wiki.ptokax.ch/feed.php?mode=list&ns=misc:dcprotocol">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/c2s_login?do=export_xhtml">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/c2s_login?do=export_raw">
<link rel="stylesheet" media="all" type="text/css" href="./Client to Server Login - WikiPx_files/css.php">
<link rel="stylesheet" media="screen" type="text/css" href="./Client to Server Login - WikiPx_files/css(1).php">
<link rel="stylesheet" media="print" type="text/css" href="./Client to Server Login - WikiPx_files/css(2).php">
<script type="text/javascript" charset="utf-8" src="./Client to Server Login - WikiPx_files/js.php"></script><style type="text/css"></style>
		<title>Client to Server Login - WikiPx</title>
					<link rel="shortcut icon" href="http://wiki.ptokax.ch/lib/tpl/monobook/user/favicon.ico">
				<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/lib/tpl/monobook/monobook/main.css"; /*]]>*/</style>

		<link rel="stylesheet" type="text/css" media="print" href="./Client to Server Login - WikiPx_files/commonPrint.css">
		<link rel="stylesheet" type="text/css" media="print" href="./Client to Server Login - WikiPx_files/print.css">

		<script type="text/javascript" src="./Client to Server Login - WikiPx_files/wikibits.js"></script>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/
		@import "/lib/tpl/monobook/wikipedia/en/Common.css";
		@import "/lib/tpl/monobook/wikipedia/en/Monobook.css";
		@import "/lib/tpl/monobook/dokuwiki/doku.css";
		@import "/lib/tpl/monobook/lang/en/lang.css";
		@import "/lib/tpl/monobook/user/Common.css";
		@import "/lib/tpl/monobook/user/Monobook.css";
		/*]]>*/</style>
    <!--[if lt IE 5.5000]><style type="text/css">@import "/lib/tpl/monobook/monobook/IE50Fixes.css";</style><![endif]-->
    <!--[if IE 5.5000]><style type="text/css">@import "/lib/tpl/monobook/monobook/IE55Fixes.css";</style><![endif]-->
    <!--[if IE 6]><style type="text/css">@import "/lib/tpl/monobook/monobook/IE60Fixes.css";</style><![endif]-->
    <!--[if IE 7]><style type="text/css">@import "/lib/tpl/monobook/monobook/IE70Fixes.css";</style><![endif]-->
    <!--[if lt IE 7]><script type="text/javascript" src="/lib/tpl/monobook/common/IEFixes.js"></script>

    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
	</head>
	<body class="mediawiki ns-0 ltr">
		<div id="globalWrapper">
			<div id="column-content">
				<div id="content">
					<a name="top" id="top"></a>
					<div id="siteNotice">


<h1><a name="welcome_to_the_ptokax_wiki" id="welcome_to_the_ptokax_wiki">Welcome to the PtokaX Wiki!</a></h1>
<div class="level1">
<hr>

This wiki is devoted to let users share information on the great hubsoft <a href="http://www.ptokax.org/" class="urlextern" target="_blank" title="http://www.ptokax.org/" rel="nofollow">PtokaX</a>. However, it is not limited to PtokaX, it is destined to share and discuss information on different parts of the LUA programming language, but the site is NOT intended to be a replacement for the <a href="http://luaboard.sytes.net/" class="urlextern" target="_blank" title="http://luaboard.sytes.net/" rel="nofollow">primary LUA Board aka the PtokaX Portal</a>, nor the <a href="http://lua.uknnet.com/" class="urlextern" target="_blank" title="http://lua.uknnet.com/" rel="nofollow">secondary LUA Board</a> or the <a href="http://scriptdb.ptokax.ath.cx/" class="urlextern" target="_blank" title="http://scriptdb.ptokax.ath.cx/" rel="nofollow">PtokaX resources</a>.
<p>
If you’re not familiar with wikis then in short: they are user-contributed sites: pages can be edited by (almost) anyone. As such, there is always kind of up-to-date and (hopefully) proper content. They are better than forums, since relevant pieces of information are on the same page. Do not hesitate to share your knowledge, and we all hope you can learn and teach a lot here!  — <em><a href="mailto:bastyaelvtars@gmail.com" class="mail JSnocheck" title="bastyaelvtars@gmail.com">bastya_elvtars</a></em>
</p>
<hr>
<hr>

</div>

</div>					<div id="bodyContent">
						<div class="dokuwiki">
							<!-- start content -->
														<div id="catlinks"><p class="catlinks"><span class="bchead">Trace:</span> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/s2rs_hubreg" class="breadcrumbs" title="misc:dcprotocol:s2rs_hubreg">Server to Hub Registration Server Communication</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/c2c" class="breadcrumbs" title="misc:dcprotocol:c2c">Command Types (client to client)</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/c2s" class="breadcrumbs" title="misc:dcprotocol:c2s">Command Types (client to server)</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/s2s" class="breadcrumbs" title="misc:dcprotocol:s2s">s2s</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/experimental" class="breadcrumbs" title="misc:dcprotocol:experimental">experimental</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/lock2key" class="breadcrumbs" title="misc:dcprotocol:lock2key">lock2key</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/createlock" class="breadcrumbs" title="misc:dcprotocol:createlock">createlock</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/intro" class="breadcrumbs" title="misc:dcprotocol:intro">Introduction</a> <span class="bcsep">»</span> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/c2c_handshake" class="breadcrumbs" title="misc:dcprotocol:c2c_handshake">Client to Client HandShake</a> <span class="bcsep">»</span> <span class="curid"><a href="./Client to Server Login - WikiPx_files/Client to Server Login - WikiPx.htm" class="breadcrumbs" title="misc:dcprotocol:c2s_login">Client to Server Login</a></span></p></div><div id="qsearch__out" class="ajax_qsearch JSpopup"></div>



<h1><a name="client_to_server_login" id="client_to_server_login">Client to Server Login</a></h1>
<div class="level1">

<p>

When first logging in, the client creates a socket connection. The server sends,

</p>
<pre class="code">  $Lock &lt;lock&gt; Pk=&lt;pk&gt;
  $HubName &lt;hubname&gt; </pre>
<ul>
<li class="level1"><div class="li"> <code>&lt;lock&gt;</code> is used to generate &lt;key&gt;</div>
</li>
</ul>

<p>
      See <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/lock2key" class="wikilink1" title="misc:dcprotocol:lock2key">Appendix A: Converting a Lock into a Key</a> for how to compute the key from the lock.
</p>
<ul>
<li class="level1"><div class="li"> <code>&lt;pk&gt;</code> is unused, but SG believes Pk stands for “private” or “public key”.</div>
</li>
<li class="level2"><div class="li"> <code>&lt;hubname&gt;</code> is the name of the hub your connecting to (spaces permitted).</div>
</li>
</ul>

<p>

The client must then respond with,

</p>
<pre class="code">  $Key &lt;key&gt;
  $ValidateNick &lt;nick&gt; </pre>
<ul>
<li class="level1"><div class="li"> <code>&lt;key&gt;</code> is computed as above.</div>
</li>
<li class="level2"><div class="li"> <code>&lt;nick&gt;</code> is the user's username.</div>
</li>
</ul>

<p>
      All characters except $ and | and space are allowed (the NMDC server converts any spaces to underscores and allows the login to proceed using the corrected username). 
</p>

<p>
If &lt;<code>nick&gt;</code> is already in use or is otherwise not accepted, the server must send,

</p>
<pre class="code">  $ValidateDenide </pre>

<p>

It really is <code>$ValidateDenide</code>, not <code>$ValidateDenied</code>. In this case, the client must send <code>$ValidateNick</code> again. Otherwise, the nick is accepted. The server may then send,

</p>
<pre class="code">  $GetPass </pre>

<p>

to which the client must reply,

</p>
<pre class="code">  $MyPass &lt;password&gt; </pre>
<ul>
<li class="level1"><div class="li"> <code>&lt;password&gt;</code> is the plain-text password for &lt;nick&gt;.</div>
</li>
</ul>

<p>

If the password is accepted and the user is an Op, the server must send,

</p>
<pre class="code">  $LogedIn </pre>

<p>

It really is <code>$LogedIn</code>, not <code>$LoggedIn</code>. If the user is not an Op, <code>$LogedIn</code> is skipped.
If the password is not accepted, the server must send,

</p>
<pre class="code">  $BadPass </pre>

<p>

and close the connection. NMDC hub answers with <code>$HubIsFull</code> even before the nickname is sent. Other hub implementations usually wait until the nickname is validated and then decide whether to let the user in or to disconnect him.
If no password is required or the server accepts the password, the server must finally send,

</p>
<pre class="code">  $Hello &lt;nick&gt; </pre>
<ul>
<li class="level1"><div class="li"> <code>&lt;nick&gt;</code> the clients nickname.</div>
</li>
</ul>

<p>

The user is now logged in.
</p>
<hr>

</div>

<h2><a name="download_example" id="download_example">Download Example:</a></h2>
<div class="level2">
<pre class="code">Client &lt;-&gt; Server Communication in DC. 01-26-2003. By Sid
---------------------------------------------------------- 
Client Hub Login Example
---------------------- 
C = client
H = hub 
C&gt;H: Connection
H&gt;C: $Lock &lt;lock&gt; Pk=&lt;pk&gt;|
H&gt;C: $HubName &lt;hubname&gt;|
C&gt;H: $Key &lt;key&gt;|$ValidateNick &lt;nick&gt;|
C&gt;H: $MyINFO $ALL &lt;nick&gt; &lt;interest&gt;$ $&lt;speed&gt;$&lt;e-mail&gt;$&lt;sharesize&gt;$
C&gt;H: $GetINFO &lt;othernick&gt; &lt;nick&gt;
C&gt;H: $GetINFO...
</pre>

</div>

<br>
							<div id="catlinks"><p class="catlinks"><span class="bchead">You are here: </span><a href="http://wiki.ptokax.ch/doku.php/homepage" title="homepage">About the Wiki</a> » <a href="http://wiki.ptokax.ch/doku.php/misc/homepage" title="misc:homepage" class="wikilink2" rel="nofollow">misc</a> » <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/homepage" title="misc:dcprotocol:homepage" class="wikilink2" rel="nofollow">dcprotocol</a> » <a href="./Client to Server Login - WikiPx_files/Client to Server Login - WikiPx.htm" title="misc:dcprotocol:c2s_login">Client to Server Login</a></p></div>							<!-- end content -->
							<div class="visualClear"></div>
						</div>
					</div>
				</div>
			</div>

			<div id="column-one">
				<div class="portlet" id="p-logo">
					<a style="background-image: url(/lib/tpl/monobook/user/logo.png);" href="http://wiki.ptokax.ch/" accesskey="h" title="[ALT+H]">
					</a>
				</div>

				<div id="p-cactions" class="portlet"> <h5>Views</h5>   <ul>
<li id="ca-nstab-main" class="selected"><span class="curid"><a href="./Client to Server Login - WikiPx_files/Client to Server Login - WikiPx.htm" class="wikilink1" title="misc:dcprotocol:c2s_login">Article</a></span></li>
<li id="ca-talk"><a href="http://wiki.ptokax.ch/doku.php/talk/misc/dcprotocol/c2s_login" class="wikilink2" title="talk:misc:dcprotocol:c2s_login" rel="nofollow">Discussion</a></li>
<li id="ca-edit"><a href="http://wiki.ptokax.ch/doku.php?id=misc:dcprotocol:c2s_login&do=edit&rev=" accesskey="e" title="[ALT+E]">Show pagesource</a></li>
<li id="ca-history"><a href="http://wiki.ptokax.ch/doku.php?id=misc:dcprotocol:c2s_login&do=revisions" accesskey="o" title="[ALT+O]">Old revisions</a></li>
   </ul>
</div><div id="p-x-navigation" class="portlet"> <h5>Navigation</h5><div class="pBody">





<h3><a name="scripting_help" id="scripting_help">Scripting help</a></h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/tables" class="wikilink1" title="scriptinghelp:tables">Help on tables/arrays</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/strings" class="wikilink1" title="scriptinghelp:strings">Help on the LUA5 string library</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/ptokaxapi" class="wikilink1" title="scriptinghelp:ptokaxapi">Help on the old PtokaX LUA API (OBSOLETE)</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/ptokaxapi2" class="wikilink1" title="scriptinghelp:ptokaxapi2">Help on the new PtokaX LUA API v.2</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/api2tips" class="wikilink1" title="scriptinghelp:api2tips">Tips for API 2 scripting</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/api2examples" class="wikilink1" title="scriptinghelp:api2examples">API 2 Example Scripts</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/pxwsa" class="wikilink1" title="scriptinghelp:pxwsa">The PtokaX WSA (socket) library (OBSOLETE)</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/metatables_and_metamethods" class="wikilink1" title="scriptinghelp:metatables_and_metamethods">Metatables and metamethods</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/file_manipulation" class="wikilink1" title="scriptinghelp:file_manipulation">File manipulation</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/scriptinghelp/osdate" class="wikilink1" title="scriptinghelp:osdate">Help on the Operating System Lua Library functions</a></div>
</li>
</ul>

</div>

<h3><a name="setting_up_using_the_hubsoft" id="setting_up_using_the_hubsoft">Setting up &amp; using the hubsoft</a></h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/settingup/compile_and_setting_debian_bugbuntu" class="wikilink1" title="settingup:compile_and_setting_debian_bugbuntu">Compile and setup on Debian/Ubuntu</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/settingup/compile_and_setting_centos" class="wikilink1" title="settingup:compile_and_setting_centos">Compile and setup on CentOS</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/settingup/compile_and_setting_freebsd" class="wikilink1" title="settingup:compile_and_setting_freebsd">Compile and setup on FreeBSD</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/settingup/setting_up_new_ptokax" class="wikilink1" title="settingup:setting_up_new_ptokax">Setting up PtokaX</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/settingup/running_and_using_ptokax" class="wikilink2" title="settingup:running_and_using_ptokax" rel="nofollow">Running and using PtokaX</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/settingup/service_install_guide" class="wikilink1" title="settingup:service_install_guide">PtokaX Service Install Guide</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/settingup/setting_up_ptokax" class="wikilink1" title="settingup:setting_up_ptokax">Setting up the 0.3.x versions of PtokaX (OBSOLETE)</a></div>
</li>
</ul>

</div>

<h3><a name="changelogs" id="changelogs">Changelogs</a></h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/changelogs/ptokax/main" class="wikilink1" title="changelogs:ptokax:main">PtokaX</a></div>
</li>
</ul>

</div>

<h3><a name="miscellaneous" id="miscellaneous">Miscellaneous</a></h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/misc/using_svn" class="wikilink1" title="misc:using_svn">Using SVN</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/misc/editors" class="wikilink1" title="misc:editors">Text editors for coding LUA</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ptokax.ch/doku.php/misc/dcprotocol/intro" class="wikilink1" title="misc:dcprotocol:intro">DC Protocol Documentation</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://pxlua.pastebin.com/" class="urlextern" target="_blank" title="http://pxlua.pastebin.com/" rel="nofollow">Page to highlight your source at when you are in a discussion on IM/DC++</a></div>
</li>
</ul>

</div>

</div></div>
				<div id="p-personal" class="portlet"> <h5>Personal Tools</h5>  <div class="pBody">   <ul>
<li id="pt-login"><a href="http://wiki.ptokax.ch/doku.php?id=misc:dcprotocol:c2s_login&do=login">Login</a></li>
   </ul>
  </div></div>
<div id="p-search" class="portlet">
    <h5>
        <label>Search</label></h5>
    <div class="pBody">
        <form action="http://wiki.ptokax.ch/doku.php" accept-charset="utf-8" id="dw__search" name="search">
            <input type="hidden" name="do" value="search">
            <input id="qsearch__in" name="id" type="text" accesskey="f" value="">
            <input type="button" class="searchButton" id="searchGoButton" value="Go" onclick="document.location.href=&#39;/doku.php?id=&#39; + document.search.qsearch__in.value;">&nbsp;
            <input type="submit" name="fulltext" class="searchButton" value="Search">
        </form>
    </div>
</div>

<div id="p-tb" class="portlet"> <h5>Toolbox</h5>  <div class="pBody">   <ul>
<li id="tb-whatlinkshere"><a href="http://wiki.ptokax.ch/doku.php?id=misc:dcprotocol:c2s_login&do=backlink" rel="nofollow">What links here</a></li>
<li id="tb-upload"><a href="http://wiki.ptokax.ch/lib/exe/mediamanager.php?ns=misc:dcprotocol" rel="nofollow">Upload file</a></li>
<li id="tb-special"><a href="http://wiki.ptokax.ch/doku.php?idx=wiki" rel="nofollow">Special Pages</a></li>
<li id="tb-print"><a href="http://wiki.ptokax.ch/doku.php?id=misc:dcprotocol:c2s_login&rev=1274810890&mbdo=print" rel="nofollow">Printable Version</a></li>
<li id="tb-permanent"><a href="http://wiki.ptokax.ch/doku.php?id=misc:dcprotocol:c2s_login&rev=1274810890" rel="nofollow">Permanent link</a></li>
<li id="tb-cite"><a href="http://wiki.ptokax.ch/doku.php?id=misc:dcprotocol:c2s_login&rev=1274810890&mbdo=cite" rel="nofollow">Cite this Article</a></li>
   </ul>
  </div></div>			</div>
			<!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
<div id="footer">
    <div id="f-poweredbyico">
        <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki">
            <img src="./Client to Server Login - WikiPx_files/button-dw.png" width="88" height="31" alt="Driven by DokuWiki" border="0"></a></div>
    <div id="f-copyrightico">
        <a target="_blank" href="http://tatewake.com/wiki/projects:monobook_for_dokuwiki" title="Monobook for DokuWiki">
            <img src="./Client to Server Login - WikiPx_files/button-mb.png" width="88" height="31" alt="Monobook for DokuWiki" border="0"></a></div>
    <a target="_blank" href="http://wiki.ptokax.ch/feed.php" title="Recent changes RSS feed">
        <img src="./Client to Server Login - WikiPx_files/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0"></a> <a target="_blank" href="http://www.php.net/" title="Powered by PHP">
                <img src="./Client to Server Login - WikiPx_files/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0"></a> <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0">
                        <img src="./Client to Server Login - WikiPx_files/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0"></a> <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS">
                                <img src="./Client to Server Login - WikiPx_files/button-css.png" width="80" height="15" alt="Valid CSS" border="0"></a>
    <ul id="f-list">
        <li id="lastmod">misc/dcprotocol/c2s_login.txt · Last modified: 25/05/2010@20:08 by bastya_elvtars<br>
        </li>
        <li id="copyright"></li>
        <li id="usermod"><br>
        </li>
    </ul>
</div>
		</div>
<a href="http://wiki.ptokax.ch/doku.php?do=recent" accesskey="r" style="visibility:hidden;" rel="nofollow">&nbsp;</a>
		<img src="./Client to Server Login - WikiPx_files/indexer.php" width="1" height="1" alt="">	

</body></html>