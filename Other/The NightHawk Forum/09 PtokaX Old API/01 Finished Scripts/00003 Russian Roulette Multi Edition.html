<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE>Russian Roulette Multi Edition</TITLE></HEAD><BODY><TABLE width="100%" border="1"><TR><TH width="150">Author</TH><TH>Message</TH></TR><TR><TD valign="top" align="left"><B>Madman<BR></B>Developer<BR>Newbie<BR> Offline<BR>Posts: 10<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Russian Roulette Multi Edition<BR>&#171; <B> on:</B> May 20, 2007, 12:59:47 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE><B>Feel the power of Copy n Paste!</B><BR>Play Russian Roulette with others.<BR>Up to 6 players can play at the same time.<BR>And YES RussianText.txt is a complete rip off from one of Mutor&#039;s script, but atlest he is credited for it<BR>Script can also be found on my site<BR>The script can be improved (code cleaned), but atm i don&#039;t feel like doing it, maybe later, maybe never, or maybe someone else will do it<BR>Code:-- Russian Roulette Multi Edition<BR>-- Another main spaming script<BR>-- Made by Madman<BR>-- Version: I lost track, script rewritten to many times ;p<BR>-------------------------------------------------<BR>-- Thanks to<BR>-- Mutor 4 Text<BR>-- All others in lua hub that has helped<BR>-------------------------------------------------<BR>-- Start of user settings<BR>-------------------------------------------------<BR>tConfig = {<BR>[&quot;Bot&quot;] = &quot;RussianRoulette&quot;,<BR>[&quot;TableFile&quot;] = &quot;RussianRoulette.dat&quot;,<BR>[&quot;TextFile&quot;] = &quot;RussianText.txt&quot;,<BR>}<BR>-------------------------------------------------<BR>-- End of user settings<BR>-------------------------------------------------<BR>-------------------------------------------------<BR>-- Stuff done at script start<BR>-------------------------------------------------<BR>function Main()<BR>-- Check for the table file<BR>local file = io.open(tConfig.TableFile)<BR>if file then<BR>file:close()<BR>if loadfile(tConfig.TableFile) then<BR>dofile(tConfig.TableFile)<BR>end<BR>if loadfile(tConfig.TextFile) then<BR>dofile(tConfig.TextFile)<BR>end<BR>if RussianRoulette[&quot;Players&quot;] then<BR>RussianRoulette[&quot;Players&quot;] = nil -- Clear Players<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>end<BR>else-- We didn&#039;t find it, create it<BR>local MakeFile = io.open(tConfig.TableFile, &quot;w+&quot;)<BR>MakeFile:write(&#039;RussianRoulette = {\n\t[&quot;Score&quot;] = {\n\t},\n}&#039;)<BR>MakeFile:close()<BR>end<BR>frmHub:RegBot(tConfig.Bot) -- Reg the bot<BR>GameOn = nil<BR>end<BR>Sec&nbsp; = 1000<BR>Min&nbsp; = 60*Sec<BR>Hour = 60*Min<BR>Day&nbsp; = 24*Hour<BR>TmrFreq = 1*Sec<BR>-------------------------------------------------<BR>-- Timer...<BR>-------------------------------------------------<BR>function OnTimer()<BR>local nr = 0<BR>for i,_ in pairs(RussianRoulette[&quot;Players&quot;]) do<BR>nr = nr+1<BR>end<BR>if nr &gt;= 2 then<BR>SendToPlayers(&quot;Time is up, let the dying begin!&quot;)<BR>SendToPlayers(RussianRoulette[&quot;Players&quot;][1].. &quot; takes the first shoot&quot;)<BR>GameOn = 1<BR>elseif nr &lt;= 1 then<BR>SendToPlayers(&quot;Game was not started, not enough people joined&quot;)<BR>RussianRoulette[&quot;Players&quot;] = nil<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>end<BR>StopTimer()<BR>end<BR>-------------------------------------------------<BR>-- Msg to players<BR>-------------------------------------------------<BR>function SendToPlayers(Msg)<BR>for _,nick in pairs(RussianRoulette[&quot;Players&quot;]) do<BR>SendToNick(nick,&quot;&lt;&quot; ..tConfig.Bot.. &quot;&gt; &quot; ..Msg)<BR>end<BR>end<BR>-------------------------------------------------<BR>-- Chat handling<BR>-------------------------------------------------<BR>function ChatArrival(curUser, data)<BR>local data = string.sub(data, 1, -2)<BR>local s,e,cmd = string.find(data, &quot;%b&lt;&gt;%s+[%!%+%#%?](%S+)&quot;) -- Find cmd<BR>if cmd then<BR>local tCmds = {<BR>[&quot;play_rr&quot;] = function(curUser,data)<BR>local nr = 1<BR>if RussianRoulette[&quot;Players&quot;] == nil then<BR>RussianRoulette[&quot;Players&quot;] = {}<BR>SetTimer(30*Sec)<BR>StartTimer()<BR>SendToAll(tConfig.Bot, &quot;30 Sec to game start, type !play_rr to join&quot;)<BR>else<BR>for i,v in pairs(RussianRoulette[&quot;Players&quot;]) do<BR>if v == curUser.sName then<BR>curUser:SendData(tConfig.Bot, &quot;You allready are in the game&quot;) return 1<BR>end<BR>nr = nr+1<BR>end<BR>end<BR>if nr == 7 then -- max 6 players<BR>curUser:SendData(tConfig.Bot, &quot;Russian Roulette table is currentlt full&quot;)<BR>else<BR>RussianRoulette[&quot;Players&quot;][nr] = curUser.sName<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>SendToAll(tConfig.Bot, curUser.sName.. &quot; has joined Russian Roulette table&quot;)<BR>end<BR>end,<BR>[&quot;shoot&quot;] = function(curUser,data)<BR>if GameOn then<BR>MaxPlayers = table.maxn(RussianRoulette[&quot;Players&quot;])<BR>if RussianRoulette[&quot;Shooter&quot;] == nil then -- If shooter is nil<BR>if curUser.sName == RussianRoulette[&quot;Players&quot;][1] then -- if current user is first in table<BR>local bang = { &quot;die&quot;, &quot;live&quot;, &quot;die&quot;, &quot;live&quot;, &quot;live&quot;, &quot;die&quot; }<BR>local shoot = bang[math.random(1,6)] -- Does user live or die?<BR>if shoot == &quot;die&quot; then -- id die<BR>local DeadMsg = string.gsub(Dead[math.random(table.maxn(Dead))], &quot;%[user%]&quot;, curUser.sName) -- Get a msg from text file<BR>SendToPlayers(&quot;Dead! &quot;..DeadMsg) -- send msg<BR>SendToPlayers(&quot;Next in line is: &quot; ..RussianRoulette[&quot;Players&quot;][2]) -- nr 2 can now play<BR>RussianRoulette[&quot;Shooter&quot;] = 2<BR>RussianRoulette[&quot;Players&quot;][1] = nil -- Remove user from table<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>else<BR>local AliveMsg = string.gsub(Alive[math.random(table.getn(Alive))], &quot;%[user%]&quot;, curUser.sName)<BR>SendToPlayers(&quot;Alive! &quot;..AliveMsg) -- send msg<BR>SendToPlayers(&quot;Next in line is: &quot; ..RussianRoulette[&quot;Players&quot;][2])<BR>RussianRoulette[&quot;Shooter&quot;] = 2<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>end<BR>local nr = 0<BR>for i,nick in pairs(RussianRoulette[&quot;Players&quot;]) do<BR>I = i<BR>nr = nr +1<BR>Name = nick<BR>end<BR>if nr == 1 then<BR>if RussianRoulette[&quot;Score&quot;][Name] then<BR>RussianRoulette[&quot;Score&quot;][Name] = RussianRoulette[&quot;Score&quot;][Name]+1<BR>else<BR>RussianRoulette[&quot;Score&quot;][Name] = 1<BR>end<BR>SendToAll(tConfig.Bot, &quot;And we have a survivor! &quot; ..RussianRoulette[&quot;Players&quot;][I].. &quot; lives and scores 1 point, Total score: &quot; ..RussianRoulette[&quot;Score&quot;][Name])<BR>RussianRoulette[&quot;Players&quot;] = nil<BR>RussianRoulette[&quot;Shooter&quot;] = nil<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>else<BR>SendToPlayers(&quot;Next in line is: &quot; ..RussianRoulette[&quot;Players&quot;][Next])<BR>end<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>else<BR>curUser:SendData(tConfig.Bot,&quot;Not your turn&quot;)<BR>end<BR>else<BR>Shooter = RussianRoulette[&quot;Shooter&quot;]<BR>if curUser.sName == RussianRoulette[&quot;Players&quot;][Shooter] then<BR>local bang = { &quot;die&quot;, &quot;live&quot;, &quot;die&quot;, &quot;live&quot;, &quot;live&quot;, &quot;die&quot; }<BR>local shoot = bang[math.random(1,6)] -- Does user live or die?<BR>if shoot == &quot;die&quot; then<BR>local DeadMsg = string.gsub(Dead[math.random(table.maxn(Dead))], &quot;%[user%]&quot;, curUser.sName) -- Get a msg from text file<BR>SendToPlayers(&quot;Dead! &quot;..DeadMsg) -- dead msg...<BR>if Shooter == MaxPlayers then -- if we reached end of table<BR>for i=1,6 do -- loop it again<BR>if RussianRoulette[&quot;Players&quot;][i] ~= nil then -- until we get a player<BR>Next = i -- It&#039;s player&#039;s turn<BR>break -- stop the loop<BR>end<BR>end<BR>else -- if we wasent at the end of table<BR>Next = Shooter+1<BR>end<BR>RussianRoulette[&quot;Shooter&quot;] = Next -- get next shooter<BR>RussianRoulette[&quot;Players&quot;][Shooter] = nil -- remove shooter<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>else<BR>local AliveMsg = string.gsub(Alive[math.random(table.getn(Alive))], &quot;%[user%]&quot;, curUser.sName)<BR>SendToPlayers(&quot;Alive! &quot;..AliveMsg)<BR>if Shooter == MaxPlayers then<BR>for i=1,6 do<BR>if RussianRoulette[&quot;Players&quot;][i] ~= nil then<BR>Next = i<BR>break<BR>end<BR>end<BR>else<BR>Next = Shooter+1<BR>end<BR>RussianRoulette[&quot;Shooter&quot;] = Next<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>end<BR>local nr = 0<BR>for i,nick in pairs(RussianRoulette[&quot;Players&quot;]) do<BR>I = i<BR>nr = nr +1<BR>Name = nick<BR>end<BR>if nr == 1 then<BR>if RussianRoulette[&quot;Score&quot;][Name] then<BR>RussianRoulette[&quot;Score&quot;][Name] = RussianRoulette[&quot;Score&quot;][Name]+1<BR>else<BR>RussianRoulette[&quot;Score&quot;][Name] = 1<BR>end<BR>SendToAll(tConfig.Bot, &quot;And we have a survivor! &quot; ..RussianRoulette[&quot;Players&quot;][I].. &quot; lives and scores 1 point, Total score: &quot; ..RussianRoulette[&quot;Score&quot;][Name])<BR>RussianRoulette[&quot;Players&quot;] = nil<BR>RussianRoulette[&quot;Shooter&quot;] = nil<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>else<BR>SendToPlayers(&quot;Next in line is: &quot; ..RussianRoulette[&quot;Players&quot;][Next])<BR>end<BR>SaveToFile(tConfig.TableFile,RussianRoulette,&quot;RussianRoulette&quot;)<BR>else<BR>curUser:SendData(tConfig.Bot,&quot;Not your turn&quot;)<BR>end<BR>end<BR>else<BR>curUser:SendData(tConfig.Bot,&quot;Game is not on, use !play_rr to join&quot;)<BR>end<BR>end,<BR>[&quot;score_rr&quot;] = function(curUser,data)<BR>local index = {}<BR>for nick,score in pairs(RussianRoulette[&quot;Score&quot;]) do table.insert(index,nick) end<BR>table.sort(index, function(a,b) return RussianRoulette[&quot;Score&quot;][a] &gt; RussianRoulette[&quot;Score&quot;][b] end)<BR>local msg = &quot;\r\n\r\n\t\t&quot; ..string.rep(&quot;-&quot;,50).. &quot;\r\n\t\t\tTop 10 Survivor&#039;s\r\n\t\t&quot; ..string.rep(&quot;-&quot;,50).. &quot;\r\n\t\tPlace\tScore\tNick&quot;<BR>for I=1,10 do<BR>if index[I] == nil then<BR>break<BR>else<BR>msg = msg..&quot;\r\n\t\t&quot;..I..&quot;.\t&quot;..RussianRoulette[&quot;Score&quot;][index[I]]..&quot;\t&quot;..index[I]<BR>end<BR>end<BR>curUser:SendData(tConfig.Bot,msg)<BR>end,<BR>}<BR>if tCmds[cmd] then<BR>return tCmds[cmd](curUser,data),1<BR>end<BR>end<BR>end<BR>-------------------------------------------------<BR>-- Serialize by nErBoS<BR>-------------------------------------------------<BR>function Serialize(tTable, sTableName, sTab)<BR>assert(tTable, &quot;tTable equals nil&quot;);<BR>assert(sTableName, &quot;sTableName equals nil&quot;);<BR>assert(type(tTable) == &quot;table&quot;, &quot;tTable must be a table!&quot;);<BR>assert(type(sTableName) == &quot;string&quot;, &quot;sTableName must be a string!&quot;);<BR>sTab = sTab or &quot;&quot;;<BR>sTmp = &quot;&quot;<BR>sTmp = sTmp..sTab..sTableName..&quot; = {\n&quot;<BR>for key, value in pairs(tTable) do<BR>local sKey = (type(key) == &quot;string&quot;) and string.format(&quot;[%q]&quot;,key) or string.format(&quot;[%d]&quot;,key);<BR>if(type(value) == &quot;table&quot;) then<BR>sTmp = sTmp..Serialize(value, sKey, sTab..&quot;\t&quot;);<BR>else<BR>local sValue = (type(value) == &quot;string&quot;) and string.format(&quot;%q&quot;,value) or tostring(value);<BR>sTmp = sTmp..sTab..&quot;\t&quot;..sKey..&quot; = &quot;..sValue<BR>end<BR>sTmp = sTmp..&quot;,\n&quot;<BR>end<BR>sTmp = sTmp..sTab..&quot;}&quot;<BR>return sTmp<BR>end<BR>function SaveToFile(file , table , tablename)<BR>local handle = io.open(file,&quot;w+&quot;)<BR>handle:write(Serialize(table, tablename))<BR>handle:flush()<BR>handle:close()<BR>end<BR>RussianText.txt bellow<BR>Code:-- Add/Edit triggers as you like<BR>Alive = {<BR>&quot; [user] are one lucky SOB.&quot;,<BR>&quot;Uh, you can breath now you made it [user].&quot;,<BR>&quot;The gods smile upon you, this day [user].&quot;,<BR>&quot;Nice job, and [user]&#039;s mother said [user] were good for nothing.&quot;,<BR>&quot;[user] have survived. ....for now.&quot;,<BR>&quot;[user] should be dead right now, this game is rigged.&quot;,<BR>&quot;Damn! I thought at last we were through with [user].&quot;,<BR>&quot;[user] lived, but [user] is still a schmuck.&quot;,<BR>}<BR>Dead = {<BR>&quot;[user] dead, now whose gonna clean up this mess?.&quot;,<BR>&quot;[user] stone cold, Hell is ready to recieve [user].&quot;,<BR>&quot;Wow, [user]&#039;s brains look great on this ivory wall.&quot;,<BR>&quot;What a loser, at least [user] died quickly.&quot;,<BR>&quot;[user] blue and cold, and let me guess, uninsured?&quot;,<BR>&quot;No [user] they ain&#039;t blanks, R.I.P.&nbsp; ....stupid.&quot;,<BR>&quot;[user]. It just goes to prove stupid people shouldn&#039;t breed.&quot;,<BR>&quot;Dammit [user]! Thanks for nothing ya stinking corpse, I just lost $20.&quot;,<BR>&quot;Well I&#039;m out of here. I&#039;ll see [user] at [user]&#039;s funeral.&quot;,<BR>&quot;Got Ya! Hopefully this is the last we see of [user]&quot;<BR>}<BR></TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: Russian Roulette Multi Edition<BR>&#171; <B>Reply #1 on:</B> May 21, 2007, 08:26:38 AM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>niceee&nbsp; [/default/cool.gif]</TD></TR></TABLE></BODY></HTML>