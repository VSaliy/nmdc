<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE>Trafego ( IP Checker )</TITLE></HEAD><BODY><TABLE width="100%" border="1"><TR><TH width="150">Author</TH><TH>Message</TH></TR><TR><TD valign="top" align="left"><B>Chucky<BR></B>Newbie<BR> Offline<BR>Posts: 10<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Trafego ( IP Checker )<BR>&#171; <B> on:</B> May 02, 2007, 08:42:20 AM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>Greetings yall ...<BR>Some of you might find this request a bit weird, but it&#039;&#039;s the least i can do to help my country users...<BR>Our Isp&#039;&#039;s make limits on international downloads, what makes some users to be very carefull on wich user to download from...&nbsp; &nbsp;This sucks, i know, but if there is a way to prevent it, i&#039;&#039;ll do it ....<BR>I have this script that has been used on Pto, and i would like to use it on Hex...<BR>Its function are pretty simple...&nbsp; There are only 2 Isp&#039;&#039;s that makes such a thing (netcabo &amp; telepac) ...<BR>When its a netcabo user, he writes !nc &lt;nick&gt; and gets a message like this:<BR>&quot;Trafic from user &lt;nick&gt; it&#039;&#039;s nacional to netcabo&quot; or &quot;Trafic from user &lt;nick&gt; it&#039;&#039;s international to netcabo&quot;...<BR>Same to telepac, using !tp &lt;nick&gt; comand ....<BR>If there is someone able to translate this script, i would be very apreciated....&nbsp; Thankx&nbsp; &nbsp;[/default/wink.gif]<BR>Code:-- Traffic Identifier by ConejoDelMal<BR>sBot = frmHub:GetHubBotName() -- bot name<BR>-- IP&#039;&#039;s da Netcabo<BR>arrNetcabo = {<BR>&nbsp; &nbsp;[&quot;81.84.0.0&quot;] = &quot;81.84.255.255&quot;,--TVCABO<BR>&nbsp; &nbsp;[&quot;83.132.0.0&quot;] = &quot;83.132.255.255&quot;,--TVCABO<BR>&nbsp; &nbsp;[&quot;83.223.160.0&quot;] = &quot;83.223.191.255&quot;,--CABOTVM.PT<BR>&nbsp; &nbsp;[&quot;85.138.0.0&quot;] = &quot;85.139.255.255&quot;,--TVCABO<BR>&nbsp; &nbsp;[&quot;89.152.0.0&quot;] = &quot;89.155.255.255&quot;,--TVCABO<BR>&nbsp; &nbsp;[&quot;212.113.160.0&quot;] = &quot;212.113.191.255&quot;,--TVCABO<BR>&nbsp; &nbsp;[&quot;213.22.0.0&quot;] = &quot;213.22.255.255&quot;,--TVCABO<BR>&nbsp; &nbsp;[&quot;213.138.224.0&quot;] = &quot;213.138.255.255&quot;,--CABOTVM.PT<BR>&nbsp; &nbsp;[&quot;213.190.192.0&quot;] = &quot;213.190.223.255&quot;,--CABOTVM.PT<BR>}<BR>-- IP&#039;&#039;s da Internacional<BR>arrIP = {<BR>&nbsp; &nbsp;[&quot;88.210.64.0&quot;] = &quot;88.210.127.255&quot;,&nbsp; --Optimus<BR>&nbsp; &nbsp;[&quot;89.180.0.0&quot;] = &quot;89.181.255.255&quot;, -- Novis<BR>&nbsp; &nbsp;[&quot;62.28.0.0&quot;] = &quot;62.28.255.255&quot;,--PT PRIME<BR>&nbsp; &nbsp;[&quot;84.18.244.0&quot;] = &quot;84.18.247.255&quot;,--NorteNet<BR>&nbsp; &nbsp;[&quot;80.243.80.0&quot;] = &quot;80.243.95.255&quot;,--Bragatel<BR>&nbsp; &nbsp;[&quot;89.152.0.0&quot;] = &quot;89.152.63.255&quot;,-- TVCABO<BR>&nbsp; &nbsp;[&quot;84.18.224.0&quot;] = &quot;84.18.243.255&quot;,-- NorteNet<BR>}<BR>-- IP&#039;&#039;s da Internacionais<BR>arrInternacionalTP = {<BR>&nbsp; &nbsp;[&quot;0.0.0.0&quot;] = &quot;9.255.255.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;11.0.0.0&quot;] = &quot;40.252.47.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;40.252.49.0&quot;] = &quot;62.22.255.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.24.0.0&quot;] = &quot;62.27.255.255&quot;, -- Internacional<BR>&nbsp; &nbsp;[&quot;62.29.0.0&quot;] = &quot;62.48.127.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.49.0.0&quot;] = &quot;62.72.95.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.72.128.0&quot;] = &quot;62.78.63.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.78.72.0&quot;] = &quot;62.84.191.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.84.224.0&quot;] = &quot;62.85.159.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.85.192.0&quot;] = &quot;62.95.255.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.97.0.0&quot;] = &quot;62.97.63.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.97.128.0&quot;] = &quot;62.113.191.255&quot;, --Internacional<BR>&nbsp; &nbsp;[&quot;62.114.0.0&quot;] = &quot;62.152.95.255&quot;, --Internacional<BR>}<BR>function ChatArrival(user,data)<BR>data=string.sub(data,1,-2)<BR>local s,e,cmd = string.find ( data, &quot;%b&lt;&gt;%s+[%!%?%+%#](%S+)&quot; )<BR>if cmd then<BR>local s,e,usr = string.find( data, &quot;%b&lt;&gt;%s+%S+%s+(%S+)&quot; )<BR>local tCmds = {<BR>[&quot;tp&quot;] =function(user,data)<BR>if usr == nil then<BR>user:SendData(sBot, &quot;Indica um(a) utilizador(a): !tp nick&quot;)<BR>else<BR>local victim = GetItemByName(usr)<BR>if (victim == nil) then<BR>user:SendData(sBot, &quot;O(a) utilizador(a) &quot;..usr..&quot; não está online.&quot;)<BR>else<BR>if (isIntSapoIP(victim.sIP) == nil) then<BR>user:SendData(sBot, &quot;O tráfego do(a) utilizador(a) &quot;..victim.sName..&quot; é nacional para Telepac&quot;)<BR>else<BR>user:SendData(sBot, &quot;O tráfego do(a) utilizador(a) &quot;..victim.sName..&quot; é internacional para Telepac&quot;)<BR>end<BR>for i,nick in pairs(frmHub:GetOnlineUsers()) do<BR>if&nbsp; nick.iProfile == 0 or nick.iProfile == 1 or nick.iProfile == 2 then<BR>nick:SendData( &quot;Sapo pedido por &quot;..user.sName)<BR>end<BR>end<BR>end<BR>end<BR>end,<BR>[&quot;nc&quot;] =function(user,data)<BR>if usr == nil then<BR>user:SendData(sBot, &quot;Indica um(a) utilizador(a): !nc nick&quot;)<BR>else<BR>local victim = GetItemByName(usr)<BR>if (victim == nil) then<BR>user:SendData(sBot, &quot;O(a) utilizador(a) &quot;..usr..&quot; não está online.&quot;)<BR>else<BR>if (isNetcaboIP(victim.sIP)) then<BR>user:SendData(sBot, &quot;O(a) utilizador(a) &quot;..victim.sName..&quot; é Netcabo&quot;)<BR>for i,nick in pairs(frmHub:GetOnlineUsers()) do<BR>if&nbsp; nick.iProfile == 0 or nick.iProfile == 1 or nick.iProfile == 2 then<BR>nick:SendData( &quot;Netcabo pedido por &quot;..user.sName)<BR>end<BR>end<BR>return 1<BR>end<BR>if (isIntNetIP(victim.sIP)) then<BR>user:SendData(sBot, &quot;O tráfego do(a) utilizador(a) &quot;..victim.sName..&quot; é nacional para Netcabo&quot;)<BR>else<BR>user:SendData(sBot, &quot;O tráfego do(a) utilizador(a) &quot;..victim.sName..&quot; é internacional para Netcabo&quot;)<BR>end<BR>for i,nick in pairs(frmHub:GetOnlineUsers()) do<BR>if&nbsp; nick.iProfile == 0 or nick.iProfile == 1 or nick.iProfile == 2 then<BR>nick:SendData( &quot;Netcabo pedido por &quot;..user.sName)<BR>end<BR>end<BR>end<BR>end<BR>end,<BR>}<BR>if tCmds[cmd] then<BR>return tCmds[cmd](user,data), 1<BR>end<BR>end<BR>end<BR>function isNetcaboIP(sIP)<BR>sIP = ipToNumber(sIP)<BR>local iFirst,iLast<BR>for iFirst, iLast in pairs(arrNetcabo) do<BR>if (sIP &gt;= ipToNumber(iFirst) and sIP &lt;= ipToNumber(iLast)) then<BR>return 1<BR>end<BR>end<BR>return nil<BR>end<BR>function isIntNetIP(sIP)<BR>sIP = ipToNumber(sIP)<BR>local iFirst,iLast<BR>for iFirst, iLast in pairs(arrIP) do<BR>if (sIP &gt;= ipToNumber(iFirst) and sIP &lt;= ipToNumber(iLast)) then<BR>return 1<BR>end<BR>end<BR>return nil<BR>end<BR>function isIntSapoIP(sIP)<BR>sIP = ipToNumber(sIP)<BR>local iFirst,iLast<BR>for iFirst, iLast in pairs(arrInternacionalTP) do<BR>if (sIP &gt;= ipToNumber(iFirst) and sIP &lt;= ipToNumber(iLast)) then<BR>return 1<BR>end<BR>end<BR>return nil<BR>end<BR>function ipToNumber(sIP)<BR>iAux = &quot;&quot;<BR>string.gsub(sIP,&quot;(%d+)&quot;, function(w)<BR>w = tonumber(w)<BR>if (w &lt; 10) then<BR>iAux = iAux..&quot;00&quot;..w<BR>elseif (w &lt; 100) then<BR>iAux = iAux..&quot;0&quot;..w<BR>else<BR>iAux = iAux..w<BR>end<BR>end)<BR>return tonumber(iAux)<BR>end<BR>P.S.- Removed a lot of IP ranges from script, cause forum is not letting me posting it</TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: Script convert<BR>&#171; <B>Reply #1 on:</B> May 02, 2007, 10:04:29 AM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>Quote from: Chucky on May 02, 2007, 08:42:20 AM<BR>P.S.- Removed a lot of IP ranges from script, cause forum is not letting me posting it<BR>What error message does the forum give you exactly ? As it should allow it.<BR>Also, can you please add the script as an attachment, the forum does unfortunatly change some stuff in the code :/<BR>If you add it, we can look at it :)</TD></TR><TR><TD valign="top" align="left"><B>Chucky<BR></B>Newbie<BR> Offline<BR>Posts: 10<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: Script convert<BR>&#171; <B>Reply #2 on:</B> May 02, 2007, 06:43:38 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>Code: The following error or errors occurred while posting this message:<BR>The message exceeds the maximum allowed length (20000 characters).<BR>Thankx&nbsp; :)<BR></TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: Script convert<BR>&#171; <B>Reply #3 on:</B> May 02, 2007, 08:02:59 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>cool, will convert for ya 2morrow<BR>Also updated max char length to 50,000&nbsp; :)</TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: Script convert<BR>&#171; <B>Reply #4 on:</B> May 03, 2007, 01:16:08 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>Here&#039;&#039;s a converted script.<BR>Lemmy know if it works properly&nbsp; [/default/cool.gif]</TD></TR><TR><TD valign="top" align="left"><B>Chucky<BR></B>Newbie<BR> Offline<BR>Posts: 10<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: Script convert<BR>&#171; <B>Reply #5 on:</B> May 06, 2007, 08:39:26 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>It&#039;&#039;s working perfectly...&nbsp; &nbsp; Thankx a lot m8&nbsp; &nbsp; [/default/wink.gif]</TD></TR></TABLE></BODY></HTML>