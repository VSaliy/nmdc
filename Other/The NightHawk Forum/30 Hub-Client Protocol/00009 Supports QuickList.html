<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE>Supports QuickList</TITLE></HEAD><BODY><TABLE width="100%" border="1"><TR><TH width="150">Author</TH><TH>Message</TH></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Supports QuickList<BR>&#171; <B> on:</B> May 02, 2007, 10:10:22 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE><BR>This is the accepted version of the QuickList protocol as suggested by the QuickList team. The QuickList team did not exist until I wrote this sentence, but that doesn&#039;&#039;t stop me from drafting a couple of inspiring people into the group and give credit in no particular order. Many thanks to:<BR>• Neimad<BR>• Meltingfire<BR>• fusbar<BR>• ender<BR>• Gumboot<BR>• Sedulus<BR>• TasMan<BR>• Trem0r<BR>• arnetheduck<BR>• Knoton<BR>I will use the terms NDC and NHUB to denote a client or hub not featuring QuickList and QDC and QHUB for those that do. The term DC is used when the type is not yet established or of no importance. EACH and ALL signals that a message is sent N times, one message for each connected user. Also note that the terms IF, MAY, SHOULD and MUST, have the same meaning as in the internet RFC specs.<BR>Walkthrough<BR>Connecting<BR>1&nbsp;&nbsp;&nbsp;A DC connects to QHUB and does nothing<BR>2&nbsp;&nbsp;&nbsp;QHUB sends $Lock which starts with EXTENDEDPROTOCOL<BR>3&nbsp;&nbsp;&nbsp;QHUB also sends $HubName<BR>4&nbsp;&nbsp;&nbsp;A DC must send $Key<BR>5&nbsp;&nbsp;&nbsp;A DC may also send &#039;&#039;$Supports QuickList&#38;#124;&#039;&#039; to signal in is in fact a QDC<BR>6&nbsp;&nbsp;&nbsp;QHUB responds with &#039;&#039;$Supports QuickList&#38;#124;&#039;&#039;<BR>Identification<BR>1&nbsp;&nbsp;&nbsp;A QDC may but should not send $Version<BR>1&nbsp;&nbsp;&nbsp;A QDC must send $MyINFO<BR>Authentication<BR>1&nbsp;&nbsp;&nbsp;QHUB may send $GetPass<BR>2&nbsp;&nbsp;&nbsp;QDC responds with $MyPass<BR>3&nbsp;&nbsp;&nbsp;QHUB may send $BadPass and disconnect<BR>4&nbsp;&nbsp;&nbsp;QHUB may send $ValidateDenide and disconnect<BR>Acceptance<BR>1&nbsp;&nbsp;&nbsp;QHUB may send $LogedIn to signal that H: should not be incremented<BR>2&nbsp;&nbsp;&nbsp;QHUB sends all clients MyINFO to the QDC<BR>3&nbsp;&nbsp;&nbsp;QHUB sends $OpList to the QDC<BR>4&nbsp;&nbsp;&nbsp;QHUB may send $Hello to all clients but should send it to non QDC only<BR>5&nbsp;&nbsp;&nbsp;QHUB sends $MyINFO to all QDC clients<BR>Explanation<BR>Connecting<BR>This part has been through some changes. There was an argument of having the client start with $Supports and then having the hub respond to that. Having the client start with $Supports as a response to EXTENDEDPROTOCOL is in a sense much cleaner.<BR>•&nbsp;&nbsp;&nbsp;I have found that $HubName can be sent pretty much at any time. I do it in conjunction with $Lock.<BR>•&nbsp;&nbsp;&nbsp;$Supports are in the same format as in the client protocol; &#039;&#039;$Supports &lt;feat1&gt; &lt;feat2&gt; &lt;feat3&gt;&#38;#124;&#039;&#039;<BR>Identification<BR>•&nbsp;&nbsp;&nbsp;sending $MyPass early has been removed from the spec.<BR>Authentication<BR>•&nbsp;&nbsp;&nbsp;As previously mentioned $GetPass is only sent if the user has an account and the $MyPass was not sent in the identification process. $BadPass or $ValidateDenide is sent when proper as usual.<BR>Acceptance<BR>From testing I have found that $Hello and $MyINFO can be sent together without having to wait for a $GetINFO.<BR>•&nbsp;&nbsp;&nbsp;Let the hub decide if the account should be treated as a VIP, i.e. not increment H: in the tag, hence it is not mandatory for accounts. A QDC should only respond to this message for account logins only.<BR>•&nbsp;&nbsp;&nbsp;$OpList was missing.<BR>Commands Sent<BR>Connecting<BR>•&nbsp;&nbsp;&nbsp;$Lock<BR>•&nbsp;&nbsp;&nbsp;$HubName<BR>•&nbsp;&nbsp;&nbsp;$Supports<BR>Identification<BR>Authentication<BR>•&nbsp;&nbsp;&nbsp;$GetPass<BR>•&nbsp;&nbsp;&nbsp;$BadPass<BR>•&nbsp;&nbsp;&nbsp;$ValidateDenide<BR>Acceptance<BR>•&nbsp;&nbsp;&nbsp;$LogedIn<BR>•&nbsp;&nbsp;&nbsp;$MyINFO<BR>•&nbsp;&nbsp;&nbsp;$MyINFO stream<BR>Connected<BR>•&nbsp;&nbsp;&nbsp;$To<BR>•&nbsp;&nbsp;&nbsp;$Search<BR>•&nbsp;&nbsp;&nbsp;$SR<BR>•&nbsp;&nbsp;&nbsp;$ConnectToMe<BR>•&nbsp;&nbsp;&nbsp;$RevConnectToMe<BR>•&nbsp;&nbsp;&nbsp;$ForceMove<BR>Commands Accepted<BR>Messages that a QHUB listens to in each state, QHUB ignores otherwise;<BR>Connecting<BR>•&nbsp;&nbsp;&nbsp;$Key<BR>•&nbsp;&nbsp;&nbsp;$Supports<BR>Identification<BR>•&nbsp;&nbsp;&nbsp;$Version<BR>•&nbsp;&nbsp;&nbsp;$MyINFO<BR>Authentication<BR>•&nbsp;&nbsp;&nbsp;$MyPass<BR>Acceptance<BR>Connected<BR>•&nbsp;&nbsp;&nbsp;$GetNickList<BR>•&nbsp;&nbsp;&nbsp;$MyINFO<BR>•&nbsp;&nbsp;&nbsp;$To<BR>•&nbsp;&nbsp;&nbsp;$Search<BR>•&nbsp;&nbsp;&nbsp;$SR<BR>•&nbsp;&nbsp;&nbsp;$ConnectToMe<BR>•&nbsp;&nbsp;&nbsp;$RevConnectToMe<BR>•&nbsp;&nbsp;&nbsp;$Kick<BR>•&nbsp;&nbsp;&nbsp;$OpForceMove<BR>Notes<BR>• $ValidateNick deprecated and ignored<BR>• $GetNickList only valid when connected, a QDC does not receive a $NickList, but a series of $MyINFOs directly.<BR>• $Hello deprecated and ignored<BR>• $GetINFO deprecated and ignored<BR>• $MyINFO is always accepted as valid and denotes a new or updated client.<BR></TD></TR></TABLE></BODY></HTML>