<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE>$UserCommand</TITLE></HEAD><BODY><TABLE width="100%" border="1"><TR><TH width="150">Author</TH><TH>Message</TH></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">$UserCommand<BR>&#171; <B> on:</B> May 02, 2007, 08:57:20 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE><BR>Syntax<BR>Quote$UserCommand &lt;type&gt; &lt;context&gt; &lt;details&gt;|<BR>• &lt;type&gt; is a positive integer describing the kind of command, where:<BR>&nbsp;&nbsp;&nbsp;• 0 = separator<BR>&nbsp;&nbsp;&nbsp;• 1 = raw<BR>&nbsp;&nbsp;&nbsp;• 2 = raw-nick-limited (same as raw with the exception that it should only be used once per %[nick])<BR>&nbsp;&nbsp;&nbsp;• 255 = erase all sent commands<BR>• &lt;context&gt; is sent as an integer, but is derived by logical or&#039;&#039;ing the following values together. This number controls which contexts the menus will be shown in:<BR>&nbsp;&nbsp;&nbsp;• 0x01 = Hub context (available in DC++ when clicking on the hub&#039;&#039;s tab)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Example: view hub rules, change password<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• This command should contain no &#039;&#039;somenick&#039;&#039; arguments (i.e. not %[nick] but it may contain %[mynick] or %[line:blah]).<BR>&nbsp;&nbsp;&nbsp;• 0x02 = User context (generally available in DC++ when clicking on a user&#039;&#039;s nick)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Example: show users&#039;&#039;s statistics, ban user<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• This command may take nick-specific arguments.<BR>&nbsp;&nbsp;&nbsp;• 0x04 = Search context<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Example: report &quot;bad&quot; file in search results<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• This command may take nick and file-specific arguments.<BR>&nbsp;&nbsp;&nbsp;• 0x08 = Filelist command<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Example: report a bad file found then browsing a user&#039;&#039;s list<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• This command may take nick and file-specific arguments.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Note: this context is new in DC++ 0.669<BR>• &lt;details&gt; differs per &lt;type&gt;<BR>&nbsp;&nbsp;&nbsp;• type 0 (separator) and 255 (erase) leave this field empty<BR>&nbsp;&nbsp;&nbsp;• type 1 (raw) uses &lt;title&gt;$&lt;command&gt; for the command title and the command itself<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;• Furthermore, clients MAY support sub-menus using the backslash (&#039;&#039;&#039;&#039;) in &lt;title&gt;, like: &lt;menuname&gt;&lt;title&gt;. This scheme could also be used to create sub-sub-sub-menus.<BR>Higher numbers are reserved for future use.<BR>Escaping<BR>Escaping of dollar and pipe is necessary for the &lt;command&gt; in &#039;&#039;raw&#039;&#039; mode. The DC++ escape sequence will be used. i.e. &#38;#124; for pipe, &#38;#36; for dollar and &amp;amp; for the ampersand.<BR>Escaping is used for all fields before they are sent to the hub / shown to the user.<BR>As with all NMDC commands, they must be terminated by the pipe character<BR>Contexts<BR>The context number is a binary flag that can be combined with other numbers, i.e. a user command shown in chat and search has number (2 &#38;#124; 4 = 6).<BR>Details<BR>Separator<BR>Quote$UserCommand 0 &lt;context&gt;|Will add a menu separator (vertical bar) to the specified contexts (&lt;context&gt;). It is legal to add text (after the space) before the pipe, but it won&#039;&#039;t be used (yet).<BR>Raw<BR>Quote$UserCommand 1 &lt;context&gt; &lt;title&gt;$&lt;raw&gt;|Will add a raw menu item with title &lt;title&gt; with command &lt;raw&gt;. This command must end with a &#38;#124;, if not it should be discarded. The raw command may be used to specify multiple commands to be sent to the hub.<BR>Raw-Nick-Limited<BR>Quote$UserCommand 2 &lt;context&gt; &lt;title&gt;$&lt;raw&gt;|Is exactly the same as Raw, except that the command should only be run once per %[nick]. This is to prevent the client from sending out more than one message that disconnects someone. Generally, this is only useful in the User-File context (e.g. viewing Search Results) where it is possible to select one user multiple times.<BR>Erase<BR>Quote$UserCommand 255 &lt;context&gt;|Will erase all commands that the hub has sent previously. This is for hubs/scripts that allow for updates while running. The erase all is intentional, keeping it simple. Note that contexts must still be used, and that erasing will remove all commands that match any of those ORed contexts (i.e. 7 will remove commands previously sent with any context of 1 through 7) but only from that context<BR>Examples<BR>Quote$UserCommand 2 6 Kick$&#38;#36;To: %[nick] From: %[mynick] &#38;#36;&lt;%[mynick]&gt; You are being kicked====|&#38;#36;Kick %[nick]&#38;#124;|This sends a PM with &quot;You are being kicked====&quot; to nick, and sends the $Kick command, shows up in search and chat, uses Raw-Nick-Limited to prevent multiple (redundant) kicks of one user<BR>Quote$UserCommand 255 1 |This removes all commands in the hub context, also removing those that were sent with any mask which included the hub context, from the hub context commands. i.e., if you had some-command with context 7, you now have some-command with context 6<BR></TD></TR></TABLE></BODY></HTML>