<html>
<head>
	<title>Direct Connect Protocol Documentation</title>
	<link rel=stylesheet href="/web/20040225140247cs_/http://wza.digitalbrains.com/DC/doc/screen.css" type="text/css" media=screen>
</head>

<body>
<!-- BEGIN WAYBACK TOOLBAR INSERT -->

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1388534399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/wza.digitalbrains.com\/DC\/doc\/Command_Types_(server_to_server).html";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 450;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "25";
var displayMonth = "Feb";
var displayYear = "2004";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px; z-index:9000;">
<div id="wm-ipp-inside" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://wza.digitalbrains.com/DC/doc/Command_Types_(server_to_server).html" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20040225140247" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20030902213335/http://wza.digitalbrains.com/DC/doc/Command_Types_(server_to_server).html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="2 Sep 2003"><strong>SEP</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 14:02:47 Feb 25, 2004">FEB</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20040703051614/http://wza.digitalbrains.com/DC/doc/Command_Types_(server_to_server).html" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="3 Jul 2004"><strong>JUL</strong></a>
		                
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20030902213335/http://wza.digitalbrains.com/DC/doc/Command_Types_(server_to_server).html" title="21:33:35 Sep 2, 2003" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 14:02:47 Feb 25, 2004">25</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20040703051614/http://wza.digitalbrains.com/DC/doc/Command_Types_(server_to_server).html" title="5:16:14 Jul 3, 2004" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"/></a>
		                
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2003
                       
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 14:02:47 Feb 25, 2004">2004</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2005
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20040225140247*/http://wza.digitalbrains.com/DC/doc/Command_Types_(server_to_server).html" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>6 captures</strong></a>
           <div style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">14 May 03 - 25 Aug 04</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:450px;height:27px;" href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:450px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="450"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=450_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000010101000_2004:1:010000110000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:-1:000000000000_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

	&lt;<a href="/web/20040225140247/http://wza.digitalbrains.com/DC/doc/Introduction.html">Introduction / Contents</a>&gt;
	<h1>Command Types (server to server)</h1>
	
	<p>Direct Connect uses UDP for server to server communication.<br>
	The following section describes the format of the Commands.
	Each field is denoted with <span class=variable>&lt; &gt;</span>.<br>
	The fields in the command are separated by a single space character (ASCII 32).<br>
	And each Command ends with a <span class=command>|</span> (pipe).  All Commands are case sensitive.</p>

	
	<h2>$Up</h2>
	
	<p>This message will be sent to each linked server.</p>
	<blockquote>
		$Up <span class=variable>&lt;linkedserverpassword&gt;</span> <span class=variable>&lt;ownip&gt;</span>
    </blockquote>

	<ul>
		<li><span class=variable>&lt;linkedserverpassword&gt;</span> is the multi-hub searching password shared by linked hubs.
		<li><span class=variable>&lt;ownip&gt;</span> is the ip address of the hub sending the command.
	</ul>

	<p>The server receiving the <span class=command>$Up</span> command must then respond with</p>
	
	<blockquote>
		$UpToo <span class=variable>&lt;linkedserverpassword&gt;</span> <span class=variable>&lt;ownip&gt;</span>
	</blockquote>
	
	<ul>
		<li><span class=variable>&lt;linkedserverpassword&gt;</span> is the multi-hub searching password shared by linked hubs.
		<li><span class=variable>&lt;ownip&gt;</span> is the ip address of the hub sending the command.
	</ul>
 
 
	<h2>$Search</h2>

	<p>Clients are either "active", indicating they are on the Internet
	and can receive data directly from peers, or "passive", in which case
	they can communicate only through the existing connection to the
	server.  To perform a search, an active client can send,</p>

	<blockquote>
		$Search <span class=variable>&lt;clientip&gt;</span>:<span class=variable>&lt;clientport&gt;</span> <span class=variable>&lt;searchstring&gt;</span><br>
		i.e. $Search 64.78.55.32:412 T?T?500000?1?madonna$ray
	</blockquote>

	<ul>
		<li><span class=variable>&lt;clientip&gt;</span> is this client's IP address.
		<li><span class=variable>&lt;clientport&gt;</span> is a UDP port on which the client is listening for responses.
		<li><span class=variable>&lt;searchstring&gt;</span> is a string describing the file the client is searching for.
	</ul>
    
	<p><span class=variable>&lt;searchstring&gt;</span> is made up of</p>

	<blockquote>
		<span class=variable>&lt;sizerestricted&gt;</span>?<span class=variable>&lt;isminimumsize&gt;</span>?<span class=variable>&lt;size&gt;</span>?<span class=variable>&lt;datatype&gt;</span>?<span class=variable>&lt;searchpattern&gt;</span>
	</blockquote>

	<ul>
		<li><span class=variable>&lt;sizerestricted&gt;</span> is <span class=command>T</span> if the search should be restricted to files of a minimum or maximum size, otherwise <span class=command>F</span>.
		<li><span class=variable>&lt;isminimumsize&gt;</span> is <span class=command>F</span> if <span class=variable>&lt;sizerestricted&gt;</span> is <span class=command>F</span> or if the size restriction places an upper limit on file size, otherwise <span class=command>T</span>.
		<li><span class=variable>&lt;size&gt;</span> is the minimum or maximum size of the file to report (according to <span class=variable>&lt;isminimumsize&gt;</span>) if <span class=variable>&lt;sizerestricted&gt;</span> is <span class=command>T</span>, otherwise 0.
		<li><span class=variable>&lt;datatype&gt;</span> restricts the search to files of a particular type.  It is an integer selected from:
		<ul>
			<li>1 for any file type
			<li>2 for audio files ("mp3", "mp2", "wav", "au", "rm", "mid", "sm")
			<li>3 for compressed files ("zip", "arj", "rar", "lzh", "gz", "z", "arc", "pak")
			<li>4 for documents ("doc", "txt", "wri", "pdf", "ps", "tex")
			<li>5 for executables ("pm", "exe", "bat", "com")
			<li>6 for pictures ("gif", "jpg", "jpeg", "bmp", "pcx", "png", "wmf", "psd")
			<li>7 for video ("mpg", "mpeg", "avi", "asf", "mov")
			<li>8 for folders
		</ul>

		<li>
			<span class=variable>&lt;searchpattern&gt;</span> is used other users to determine if any files match.  It is of the form:
			<blockquote>
				<span class=variable>&lt;term1&gt;</span>$<span class=variable>&lt;term2&gt;</span>$<span class=variable>&lt;term3&gt;</span>$...$
			</blockquote>

			where <span class=variable>&lt;term1&gt;</span>, <span class=variable>&lt;term2&gt;</span>, ... are search terms; normally, each search term is a space-delimited word entered by the user.  Each search term	  is followed by a <span class=command>$</span>, and after the last search term there is a total	of two <span class=command>$</span>.
		
    </ul>


	<h2>$ConnectToMe</h2>
	
	<p>This message sends the server to each linked server, when a user sends the
	<span class=command>$MultiConnectToMe</span> message.</p>
	<blockquote>
		$ConnectToMe <span class=variable>&lt;remotenick&gt;</span> <span class=variable>&lt;senderip&gt;</span>:<span class=variable>&lt;senderport&gt;</span>
    </blockquote>

	<ul>
		<li><span class=variable>&lt;remotenick&gt;</span> is the nick who we would like to connect to.
		<li><span class=variable>&lt;senderip&gt;</span> is our external ip address.
		<li><span class=variable>&lt;senderport&gt;</span> is the port we are listening on.
	</ul>
</body>
</html>





<!--
     FILE ARCHIVED ON 14:02:47 Feb 25, 2004 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 20:53:49 Jan 19, 2013.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
