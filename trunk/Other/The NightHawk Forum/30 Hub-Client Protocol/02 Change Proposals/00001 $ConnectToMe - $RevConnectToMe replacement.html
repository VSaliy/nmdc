<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE>$ConnectToMe / $RevConnectToMe replacement</TITLE></HEAD><BODY><TABLE width="100%" border="1"><TR><TH width="150">Author</TH><TH>Message</TH></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">$ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B> on:</B> October 03, 2007, 11:43:30 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>basis sketch of what me and The_Architect been talking about in pm this evening.<BR>$ConnectToMe and $RevConnectToMe can be simplified and made more secure.<BR>A basic transaction of what we came up with is this:<BR>Active<BR>QuoteClient1-&gt;Hub:&nbsp; $CTM &lt;Client2 Nick&gt;$&lt;local port&gt;|<BR>Hub-&gt;Client2:&nbsp; $CT &lt;Client1 Nick&gt;$&lt;Client1 IP&gt;$&lt;Client1 Port&gt;|<BR>Passive<BR>QuoteClient1-&gt;Hub:&nbsp; $RCTM &lt;Client2 Nick&gt;|<BR>Hub-&gt;Client2:&nbsp; $RCT &lt;Client1 Nick&gt;|<BR>Client2-&gt;Hub:&nbsp; $CTM &lt;Client1 Nick&gt;$&lt;local port&gt;|<BR>Hub-&gt;Client1:&nbsp; $CT &lt;Client2 Nick&gt;$&lt;Client2 IP&gt;$&lt;Client2 Port&gt;|<BR>Any feedback welcome&nbsp; [/default/cool.gif]<BR></TD></TR><TR><TD valign="top" align="left"><B>The Architect<BR></B>Developer<BR>Newbie<BR> Offline<BR>Posts: 19<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: $ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B>Reply #1 on:</B> October 03, 2007, 11:48:43 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>This should be the standard. Not only will this prevent hubs from being able to be used to DDoS, but it is less of a problem that misconfigured clients send the wrong IP because the user did not update the IP in connection settings after an IP change or something like that. One of the most important things to do in NMDC is &quot;think thin&quot;. Fortunately, NMDC is not ADC :P</TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: $ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B>Reply #2 on:</B> October 04, 2007, 12:17:42 AM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>First discussion (and changes to the draft as a direct result&nbsp; [/default/grin.gif] )<BR>Discussion<BR>Quote&lt;PPK&gt; you don&#039;t need diferent command to and from hub...<BR>&lt;CrazyGuy&gt; true<BR>&lt;CrazyGuy&gt; you think it will be easier to keep them the same ?<BR>&lt;PPK&gt; not easyer, but i am simply don&#039;t see reason to have two<BR>&lt;CrazyGuy&gt; you also wanna keep the long names or can we make em shorter to CTM and RCTM ?<BR>&lt;PPK&gt; shorter<BR>&lt;CrazyGuy&gt; i guess we&#039;re gonna need a support for it as well<BR>&lt;CrazyGuy&gt; this was just a short change of thoughts we had<BR>&lt;PPK&gt; and do we need nick here ? -&gt; $CT &lt;Client2 Nick&gt;$&lt;Client2 IP&gt;$&lt;Client2 Port&gt;|<BR>&lt;CrazyGuy&gt; don&#039;t clients evaluate that nick with what they receive in $MyNick ?<BR>&lt;PPK&gt; here is not sender nick in $ConnectToMe<BR>&lt;CrazyGuy&gt; hub knows sender nick<BR>&lt;CrazyGuy&gt; owh not ? *me checks*<BR>&lt;PPK&gt; this is how looks it when it is send to me $ConnectToMe PPK 62.245.78.248:4455|<BR>&lt;PPK&gt; no sender nick is in it ...<BR>&lt;CrazyGuy&gt; true...<BR>&lt;CrazyGuy&gt; $ConnectToMe &lt;RemoteNick&gt; &lt;SenderIp&gt;:&lt;SenderPort&gt;<BR>&lt;CrazyGuy&gt; then yes, that can be removed<BR>&lt;CrazyGuy&gt; IP and port is enough<BR>&lt;PPK&gt; maybe some connection identification...<BR>&lt;[-FND-]-The_Architect&gt; recipient nick is :P<BR>&lt;PPK&gt; is hard now to find from what hub user is when he is connecting from multiple hubs<BR>&lt;CrazyGuy&gt; yes but recipient nick doesn&#039;t need to be forwarded to recipient unless the recipient is seeing a psychiatrist for identity issues<BR>&lt;[-FND-]-The_Architect&gt; but the Client can know which hub sent the data<BR>&lt;CrazyGuy&gt; but doesn&#039;t the client know on which socket (therefor from which hub) he recieves the CTM ?<BR>&lt;[-FND-]-The_Architect&gt; yep<BR>&lt;[-FND-]-The_Architect&gt; a client, properly written, would be able to index the sockets it opens so the instances dont contradict<BR>&lt;[-FND-]-The_Architect&gt; how else do you think mainchat messages sent to me here do not appear in another hub window?<BR>&lt;[-FND-]-The_Architect&gt; furthermore, ALL standard windows sockets index connection instances<BR>&lt;PPK&gt; [-FND-]-The_Architect: passive yes, active no<BR>&lt;PPK&gt; if i request connection from user on 3 hubs, he&#039;s connect to me then i don&#039;t know from what hub connection is<BR>&lt;[-FND-]-The_Architect&gt; you mean the client-client connection initiation?<BR>&lt;[-FND-]-The_Architect&gt; that is very true<BR>&lt;PPK&gt; yes<BR>&lt;[-FND-]-The_Architect&gt; but $MyNick :P<BR>&lt;CrazyGuy&gt; can be the same<BR>&lt;[-FND-]-The_Architect&gt; either way... all we have done is reduce the CTM sent FROM client TO server to a CTM that contains no IP<BR>&lt;CrazyGuy&gt; PPK: this is with thinking about having different shares in different hubs right ?<BR>&lt;PPK&gt; CrazyGuy: yes<BR>&lt;[-FND-]-The_Architect&gt; the server will forward the same command as a Normal CTM to the recipient client<BR>&lt;[-FND-]-The_Architect&gt; different shares in different hubs? now that is a new idea<BR>&lt;[-FND-]-The_Architect&gt; :)<BR>&lt;CrazyGuy&gt; PPK : how about indicating remote share in CTM ?<BR>&lt;PPK&gt; not new, very old but is hard to do without working user connection identification<BR>&lt;[-FND-]-The_Architect&gt; i was also thinking of how the hell this should be implemented in NMDC, seeing that ADC manages to pull this one off<BR>&lt;[-FND-]-The_Architect&gt; correct.<BR>&lt;[-FND-]-The_Architect&gt; well... the protocol can be extended<BR>&lt;[-FND-]-The_Architect&gt; möär extensions!<BR>&lt;[-FND-]-The_Architect&gt; MÖÄRRRRR<BR>&lt;PPK&gt; CrazyGuy: share is too long, i am thinking about simple id with max 4 numbers<BR>&lt;[-FND-]-The_Architect&gt; the protocol can be extended to the point that the Client-Client handshake can include what hub ip the user is initiating the connection from<BR>&lt;PPK&gt; nobody normal have too much hubs, client will simply count connections from 0 to 9999 and after start again from 0<BR>&lt;CrazyGuy&gt; PPK : hmm, we tried something like that before with a token, but that wasn&#039;t unique enough<BR>&lt;[-FND-]-The_Architect&gt; hmmmm connection identifiers should not exceed that maximum value anyway :P<BR>&lt;PPK&gt; [-FND-]-The_Architect: ip is not good, for example one of hubs where i am is running on multiple ips<BR>&lt;CrazyGuy&gt; make it a hexadecimal indicator then, from 0000-FFFF<BR>&lt;[-FND-]-The_Architect&gt; multiple IPs?<BR>&lt;[-FND-]-The_Architect&gt; one hub?<BR>&lt;[-FND-]-The_Architect&gt; :S<BR>&lt;[-FND-]-The_Architect&gt; CG, i dont think we will see users connecting to 9999 hubs any time soon :P<BR>&lt;PPK&gt; yes, theyr isp throttling badwith on primary ip :-/<BR>&lt;CrazyGuy&gt; Archi : you read wrong.. sending 9999 $CTM&#039;s<BR>&lt;[-FND-]-The_Architect&gt; AH!<BR>&lt;[-FND-]-The_Architect&gt; i c now<BR>&lt;[-FND-]-The_Architect&gt; bbl<BR>&lt;CrazyGuy&gt; PPK : is hexadecimal an option ?<BR>&lt;PPK&gt; CrazyGuy: 9999 will be good, enough when user will be on 1000 hubs and from all send ctm to me... identification will work<BR>&lt;CrazyGuy&gt; okay, lemmy make a new draft then.. 1 sec<BR>&lt;PPK&gt; hexa is good, that will give us 2^16 ids<BR>&lt;CrazyGuy&gt; yes<BR>&lt;CrazyGuy&gt; what about the RCTM ? who sends the original ID<BR>&lt;PPK&gt; active<BR>&lt;PPK&gt; active need it, passive know hub from where request is<BR>&lt;CrazyGuy&gt; okay<BR>New draft<BR>Quote<BR>Active<BR>Client1-&gt;Hub:&nbsp; $CTM &lt;Client2 Nick&gt;$&lt;local port&gt;$&lt;4-digit ID&gt;|<BR>Hub-&gt;Client2:&nbsp; $CTM &lt;Client1 IP&gt;$&lt;Client1 Port&gt;$&lt;4-digit ID&gt;|<BR>Passive<BR>Client1-&gt;Hub:&nbsp; $RCTM &lt;Client2 Nick&gt;|<BR>Hub-&gt;Client2:&nbsp; $RCTM &lt;Client1 Nick&gt;|<BR>Client2-&gt;Hub:&nbsp; $CTM &lt;Client1 Nick&gt;$&lt;local port&gt;$&lt;4-digit ID&gt;|<BR>Hub-&gt;Client1:&nbsp; $CTM &lt;Client2 IP&gt;$&lt;Client2 Port&gt;$&lt;4-digit ID&gt;|<BR>Thanks to PPK for his input</TD></TR><TR><TD valign="top" align="left"><B>The Architect<BR></B>Developer<BR>Newbie<BR> Offline<BR>Posts: 19<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: $ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B>Reply #3 on:</B> October 04, 2007, 12:33:16 AM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>Quote- [18:56:22] &lt;Giorgos&gt; http://www.thenighthawk.biz/index.php?option=com_smf&amp;Itemid=14&amp;topic=174.0<BR>- [18:56:52] &lt;Giorgos&gt;&nbsp; &nbsp;&nbsp;&nbsp;<BR>&quot;$ConnectToMe / $RevConnectToMe replacement &quot;<BR>- [19:09:30] &lt;Pseudonym&gt; that&#039;s.... silly<BR>So apparently, a member of DCDev believes it is silly to make an improvement that will prevent DDoS attacks from being possible.... And prevent problems due to a misconfigured client...<BR>And by the way... This is not the only time or the only member of DCDev who has ridiculed a new idea that was not arne&#039;s. Philosophy: If arne didn&#039;t come up with it, &quot;that&#039;s.... silly&quot;.</TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: $ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B>Reply #4 on:</B> October 04, 2007, 11:21:25 AM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>if you mean by &quot;DCDev&quot; &quot;The group of people that walks behind Arne and hasn&#039;t accomplished anything in over a year&quot;, then you are right.<BR>Some people are afraid of changes, and some more are afraid of changes THEY didn&#039;t come up with.<BR>Anyhow, I don&#039;t see the relevance in their opinions anyways as long as they are going with ADC draft.</TD></TR><TR><TD valign="top" align="left"><B>The Architect<BR></B>Developer<BR>Newbie<BR> Offline<BR>Posts: 19<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: $ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B>Reply #5 on:</B> October 05, 2007, 03:50:15 AM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>Another thing i notice. They are a little uncomfortable with confronting us formally about this. As in reading the posts here and not replying but choosing to talk about it in their hub. Some kind of &quot;holier than thou&quot; attitude.</TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: $ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B>Reply #6 on:</B> October 05, 2007, 02:23:54 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>And this is new how ?&nbsp; [/default/rolleyes.gif]<BR>I don&#039;t mind that, it saves me time because i don&#039;t have to discuss it with them&nbsp; [/default/grin.gif]</TD></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">Re: $ConnectToMe / $RevConnectToMe replacement<BR>&#171; <B>Reply #7 on:</B> October 05, 2007, 09:43:15 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE>Chosen support name : ACTM<BR>This post will be locked and ACTM will be added to Hub-Client Protocol.<BR>Further changes can be requested by making a Change Proposal to ACTM :)<BR>ACTM will also be added to Client-Client Protocol for determining where $CTM &lt;id&gt; will fit in</TD></TR></TABLE></BODY></HTML>