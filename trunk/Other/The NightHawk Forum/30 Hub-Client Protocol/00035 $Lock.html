<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><TITLE>$Lock</TITLE></HEAD><BODY><TABLE width="100%" border="1"><TR><TH width="150">Author</TH><TH>Message</TH></TR><TR><TD valign="top" align="left"><B>CrazyGuy<BR></B>Administrator<BR>Full Member<BR> Offline<BR>Posts: 169<BR></TD><TD valign="top" align="left"><table width="100%" border="0"><tr><td valign="middle"><BR></TD><td valign="middle">$Lock<BR>&#171; <B> on:</B> May 02, 2007, 09:24:45 PM &#187;</TD><td align="right" valign="bottom" height="20"></TD></TR></TABLE><BR>Syntax<BR>Quote$Lock &lt;lock&gt; Pk=&lt;pk&gt;|<BR>Description<BR>This command is presumably used to make sure that only the original DC client (NMDC) would be able to connect to Direct Connect Hubs and Clients. Hubs are not required to check the validity of the returned key, but they must send this command.<BR>• &lt;lock&gt; is a sequence of random characters (except (space), $, |, (?more?)), the minimum and maximum length is not known.<BR>• It is not known what the &lt;pk&gt; is for. and some client implementations skip the Pk= part altogether (DC++ can cope with this, presumably NMDC as well).<BR>This command is used in the Client-Hub Handshake, the Client-Client Handshake and the Hublist Registration. The other party has to authenticate itself using the LockToKey function. The algorithm used has been decrypted however, so now anyone may create a client for the DC network.<BR>The client never has to send a $Lock to the hub. Clients have to send a $Lock when two clients connect to eachother.<BR>Example lock for DC++-0.242:<BR>Quote$Lock EXTENDEDPROTOCOLABCABCABCABCABCABC Pk=DCPLUSPLUS0.242ABCABC|The &quot;ABCABC&quot; section is just fillers.<BR>NMDC Hub specific behaviour<BR>• Lock length: 46 to 115<BR>• Pk length: 16<BR>• Characters: random, from code 37 to 122<BR>See also<BR>$Key<BR></TD></TR></TABLE></BODY></HTML>